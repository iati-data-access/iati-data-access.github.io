(window.webpackJsonp=window.webpackJsonp||[]).push([[16,17],{450:function(t,e,o){"use strict";o.r(e);o(14),o(37);var n={data:function(){return{zoom:1.2,center:[45,0],mapControls:{zoomControl:!1,attributionControl:!1,scrollWheelZoom:!1,dragging:!1}}},props:["region-colours","region","region-name","geojson","iso2","selected-region","region-data","currency"],components:{},computed:{options:function(){return{onEachFeature:this.onEachFeatureFunction}},filterRegion:{get:function(){return this.selectedRegion},set:function(t){this.$emit("update:selectedRegion",t)}},onEachFeatureFunction:function(){var t=this;return function(e,o){o.on("mouseover",(function(t){t.target.setStyle({fillOpacity:1})})),o.on("mouseout",(function(e){e.target.setStyle({fillOpacity:t.fillOpacity})})),o.on("click",(function(){t.clickRegion()})),o.bindTooltip("<b>".concat(t.regionName,"</b><br />").concat(t.$t("dataDashboards.amount")," (").concat(t.currency.toUpperCase(),"): ").concat(t.value),{permanent:!1,sticky:!0})}},value:function(){return this.regionData[this.iso2]?this.regionData[this.iso2].value:0},fillOpacity:function(){return this.regionData[this.iso2]?this.regionData[this.iso2].opacity:0},optionsStyle:function(){return{fillColor:this.regionColours||"#ffffff",weight:1,opacity:.5,color:"#bbbbbb",fillOpacity:this.fillOpacity}}},methods:{clickRegion:function(){this.filterRegion=this.iso2}},mounted:function(){}},r=o(38),component=Object(r.a)(n,(function(){var t=this;return(0,t._self._c)("l-geo-json",{ref:"geoJson",attrs:{geojson:t.geojson,options:t.options,"options-style":t.optionsStyle}})}),[],!1,null,null,null);e.default=component.exports},452:function(t,e,o){var content=o(457);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(59).default)("de8d5d8c",content,!0,{sourceMap:!1})},456:function(t,e,o){"use strict";o(452)},457:function(t,e,o){var n=o(58)(!1);n.push([t.i,".region-map{height:350px!important;width:100%;background:none}",""]),t.exports=n},462:function(t,e,o){"use strict";o.r(e);o(16),o(1);var n=o(37),r=o.n(n),l={data:function(){return{zoom:1.5,center:[10,0],regions:[],mapAttribution:'<a href="https://datacatalog.worldbank.org/search/dataset/0038272/World-Bank-Official-Boundaries">Map data</a> &copy; World Bank Group | <a href="https://leafletjs.com/">Leaflet</a>',mapControls:{scrollWheelZoom:!1,touchZoom:!1,attributionControl:!1}}},props:{data:{default:function(){return[]}},total:{default:0},selectedRegion:{default:function(){return[]}},datasets:{default:function(){return[]}},currency:{default:"usd"}},components:{MapFeature:o(450).default},computed:{filterRegion:{get:function(){return this.selectedRegion},set:function(t){this.$emit("update:selectedRegion",t)}},regionData:function(){var t=this;return this.datasets.map((function(e){var o=t.data.reduce((function(t,o){return t+=o[e.field]?o[e.field]:0}),0);return t.data.reduce((function(summary,t){return summary[t["recipient_country_or_region.code"]]={opacity:t[e.field]/o*100,value:null==t[e.field]?"0.00":t[e.field].toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})},summary}),{})}))}},methods:{getGeoJSON:function(){var t=this;r.a.get("/worldbank.geo.json").then((function(e){t.regions=e.data.features.map((function(e){var o=e.properties["NAME_".concat(t.$i18n.locale.toUpperCase())];return{type:"FeatureCollection",name:o,region:o,regionName:o,iso2:"FR"==e.properties.WB_A2?e.properties.WB_A2:e.properties.ISO_A2,features:{type:"Feature",properties:{Region:o},geometry:e.geometry}}}))}))}},mounted:function(){this.getGeoJSON()}},c=(o(456),o(38)),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",[e("client-only",[e("l-map",{staticClass:"region-map",attrs:{zoom:t.zoom,center:t.center,options:t.mapControls}},[e("l-control-attribution",{attrs:{position:"bottomright",prefix:t.mapAttribution}}),t._v(" "),e("l-control-layers",{attrs:{position:"topright",collapsed:!1}}),t._v(" "),t._l(t.datasets,(function(o,i){return e("l-layer-group",{key:o.label,ref:o.label,refInFor:!0,attrs:{name:o.label,pane:"overlayPane",dataset:o,layerType:"base",visible:0==i}},t._l(t.regions,(function(n,r){return"-99"!=n.iso2?e("MapFeature",{key:r,attrs:{"region-colours":o.backgroundColor,geojson:n.features,region:n.region,iso2:n.iso2,regionName:n.regionName,selectedRegion:t.filterRegion,regionData:t.regionData[i],currency:t.currency},on:{"update:selectedRegion":function(e){t.filterRegion=e},"update:selected-region":function(e){t.filterRegion=e}}}):t._e()})),1)}))],2)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{MapFeature:o(450).default})}}]);