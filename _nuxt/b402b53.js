(window.webpackJsonp=window.webpackJsonp||[]).push([[10,16,17],{450:function(t,e,n){"use strict";n.r(e);n(14),n(37);var o={data:function(){return{zoom:1.2,center:[45,0],mapControls:{zoomControl:!1,attributionControl:!1,scrollWheelZoom:!1,dragging:!1}}},props:["region-colours","region","region-name","geojson","iso2","selected-region","region-data","currency"],components:{},computed:{options:function(){return{onEachFeature:this.onEachFeatureFunction}},filterRegion:{get:function(){return this.selectedRegion},set:function(t){this.$emit("update:selectedRegion",t)}},onEachFeatureFunction:function(){var t=this;return function(e,n){n.on("mouseover",(function(t){t.target.setStyle({fillOpacity:1})})),n.on("mouseout",(function(e){e.target.setStyle({fillOpacity:t.fillOpacity})})),n.on("click",(function(){t.clickRegion()})),n.bindTooltip("<b>".concat(t.regionName,"</b><br />").concat(t.$t("dataDashboards.amount")," (").concat(t.currency.toUpperCase(),"): ").concat(t.value),{permanent:!1,sticky:!0})}},value:function(){return this.regionData[this.iso2]?this.regionData[this.iso2].value:0},fillOpacity:function(){return this.regionData[this.iso2]?this.regionData[this.iso2].opacity:0},optionsStyle:function(){return{fillColor:this.regionColours||"#ffffff",weight:1,opacity:.5,color:"#bbbbbb",fillOpacity:this.fillOpacity}}},methods:{clickRegion:function(){this.filterRegion=this.iso2}},mounted:function(){}},r=n(38),component=Object(r.a)(o,(function(){var t=this;return(0,t._self._c)("l-geo-json",{ref:"geoJson",attrs:{geojson:t.geojson,options:t.options,"options-style":t.optionsStyle}})}),[],!1,null,null,null);e.default=component.exports},451:function(t,e,n){var content=n(455);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(59).default)("df2a5d2c",content,!0,{sourceMap:!1})},452:function(t,e,n){var content=n(457);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(59).default)("de8d5d8c",content,!0,{sourceMap:!1})},454:function(t,e,n){"use strict";n(451)},455:function(t,e,n){var o=n(58)(!1);o.push([t.i,".bar-chart[data-v-10a72cdf]{width:100%;height:400px}",""]),t.exports=o},456:function(t,e,n){"use strict";n(452)},457:function(t,e,n){var o=n(58)(!1);o.push([t.i,".region-map{height:350px!important;width:100%;background:none}",""]),t.exports=o},461:function(t,e,n){"use strict";n.r(e);n(14),n(42),n(21),n(16);var o=n(449),r=n(445);r.e.register(r.p,r.q,r.i,r.b,r.d,r.k);var l={data:function(){return{isBusy:!0}},props:{cells:{default:function(){return[]}},drilldown:{default:null},currency:{default:"usd"},datasets:{default:function(){return[]}},clickable:{default:!1},height:{default:"400px"},selectedDrilldown:{default:function(){return function(){}}}},components:{Bar:o.a},methods:{handleClick:function(t,e){if(0!=this.clickable&&0!=e.length){e[0]._index;var n=this.cells[e[0]._index];this.selectedDrilldown(n["".concat(this.drilldown,".code")])}}},computed:{valueLabel:function(){return"".concat(this.$t("dataDashboards.amount")," (").concat(this.selectedCurrencyLabel,")")},selectedCurrencyLabel:function(){return this.$t("dataDashboards.currencies")[this.currency]},barChartHeight:function(){return"height: ".concat(this.height,";")},barChartOptions:function(){var t=this;return{onClick:this.handleClick,onHover:function(e,n){0!=t.clickable&&(e.native.target.style.cursor=n[0]?"pointer":"default")},maintainAspectRatio:!1,tooltips:{callbacks:{title:function(e,data){return t.chartData.labels[e[0].index]},label:function(e,data){var n=data.datasets[e.datasetIndex].label,label="".concat(n," (").concat(t.selectedCurrencyLabel,")")||!1;return label&&(label+=": "),label+=e.yLabel.toLocaleString(void 0,{maximumFractionDigits:1,minimumFractionDigits:1}),label}}},scales:{yAxis:{ticks:{beginAtZero:!0,callback:function(t){return t.toLocaleString(void 0,{maximumFractionDigits:0,minimumFractionDigits:0})}},title:{display:!0,text:this.valueLabel}},xAxis:{ticks:{callback:function(t,e,n){var o=this.getLabelForValue(t);return(null==o?void 0:o.length)>=20?o.slice(0,o.length).substring(0,19).trim()+"...":o}}}}}},chartData:function(){var t=this;return{datasets:this.datasets.map((function(e){return{label:e.label,fill:!0,data:t.cells.map((function(t){return t[e.field]})),backgroundColor:e.backgroundColor}})),labels:this.cells.map((function(e){return e[t.drilldown]}))}}}},c=(n(454),n(38)),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",[e("Bar",{ref:"barChart",staticClass:"bar-chart",style:t.barChartHeight,attrs:{"chart-data":t.chartData,"chart-options":t.barChartOptions}})],1)}),[],!1,null,"10a72cdf",null);e.default=component.exports},462:function(t,e,n){"use strict";n.r(e);n(16),n(1);var o=n(37),r=n.n(o),l={data:function(){return{zoom:1.5,center:[10,0],regions:[],mapAttribution:'<a href="https://datacatalog.worldbank.org/search/dataset/0038272/World-Bank-Official-Boundaries">Map data</a> &copy; World Bank Group | <a href="https://leafletjs.com/">Leaflet</a>',mapControls:{scrollWheelZoom:!1,touchZoom:!1,attributionControl:!1}}},props:{data:{default:function(){return[]}},total:{default:0},selectedRegion:{default:function(){return[]}},datasets:{default:function(){return[]}},currency:{default:"usd"}},components:{MapFeature:n(450).default},computed:{filterRegion:{get:function(){return this.selectedRegion},set:function(t){this.$emit("update:selectedRegion",t)}},regionData:function(){var t=this;return this.datasets.map((function(e){var n=t.data.reduce((function(t,n){return t+=n[e.field]?n[e.field]:0}),0);return t.data.reduce((function(summary,t){return summary[t["recipient_country_or_region.code"]]={opacity:t[e.field]/n*100,value:null==t[e.field]?"0.00":t[e.field].toLocaleString(void 0,{maximumFractionDigits:2,minimumFractionDigits:2})},summary}),{})}))}},methods:{getGeoJSON:function(){var t=this;r.a.get("/worldbank.geo.json").then((function(e){t.regions=e.data.features.map((function(e){var n=e.properties["NAME_".concat(t.$i18n.locale.toUpperCase())];return{type:"FeatureCollection",name:n,region:n,regionName:n,iso2:"FR"==e.properties.WB_A2?e.properties.WB_A2:e.properties.ISO_A2,features:{type:"Feature",properties:{Region:n},geometry:e.geometry}}}))}))}},mounted:function(){this.getGeoJSON()}},c=(n(456),n(38)),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",[e("client-only",[e("l-map",{staticClass:"region-map",attrs:{zoom:t.zoom,center:t.center,options:t.mapControls}},[e("l-control-attribution",{attrs:{position:"bottomright",prefix:t.mapAttribution}}),t._v(" "),e("l-control-layers",{attrs:{position:"topright",collapsed:!1}}),t._v(" "),t._l(t.datasets,(function(n,i){return e("l-layer-group",{key:n.label,ref:n.label,refInFor:!0,attrs:{name:n.label,pane:"overlayPane",dataset:n,layerType:"base",visible:0==i}},t._l(t.regions,(function(o,r){return"-99"!=o.iso2?e("MapFeature",{key:r,attrs:{"region-colours":n.backgroundColor,geojson:o.features,region:o.region,iso2:o.iso2,regionName:o.regionName,selectedRegion:t.filterRegion,regionData:t.regionData[i],currency:t.currency},on:{"update:selectedRegion":function(e){t.filterRegion=e},"update:selected-region":function(e){t.filterRegion=e}}}):t._e()})),1)}))],2)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{MapFeature:n(450).default})}}]);